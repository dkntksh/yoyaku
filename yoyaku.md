# 会議室予約システム

# 機能一覧

## 管理機能
- 管理者ログイン
- メニュー画面
- 所属組織管理
- ユーザ管理
- 会議室管理
- 予約管理
- 会議室稼働率
- 管理者ユーザ管理

## フロントユーザ機能
- ログイン
- TOP画面（予約状況一覧）
- 予約登録
- 予約変更
- 予約削除

## バッチ機能
- 初期管理者情報作成バッチ


# 機能詳細

## 管理者ログイン
- 初期管理者情報作成バッチで作成された、ユーザ名/パスワードでログインが可能
- ログインエラーが5回続くと、10分間ログインを停止する。
- ログイン停止時間中はログインができない
- ログインが成功すると、最終ログイン日時を更新して、メニュー画面に遷移する

## メニュー画面
- 各画面へ遷移するための画面
- ユーザ管理、所属書式管理、改質管理、予約管理、会議室稼働率の5つの画面へのリンク
- リンクをクリックすると、各一覧画面に遷移する

# 所属部署管理
- root(削除できない)を起点にtree構造で部署を管理する
- 親子関係を持ち、親子関係は変更が可能


### 所属部署一覧
- 所属部署管理の初期表示画面  tree構造で組織図を表示する。
- 上位20件を表示する
- 部署名での絞り込みが可能（前方一致）

### 所属部署登録
- 所属部署を登録する
- 所属部署名、親部署、子部署を指定する
- 所属部署名、親部署は必須、子部署は任意
- 所属部署名は100文字まで入力可能
- 登録後、所属部署一覧へ遷移する


### 所属部署更新
- 既存の所属部署を更新する
- 所属部署名、親部署、子部署の更新が可能
- 所属部署名、親部署は必須、子部署は任意
- 所属部署名は100文字まで入力可能
- 更新後、所属部署一覧へ遷移する


### 所属部署削除
- 既存の所属部署を削除する
- 削除した部署の子部署は親部署に紐づくものとする。
- 所属するユーザが存在する場合、削除できない。

## ユーザ管理
- 会議室を予約するユーザを登録/更新/削除/参照する


### ユーザ一覧
- 登録されているユーザを一覧表示する
- ユーザ名、メールアドレス、所属部署を表示する
- 検索条件：ユーザ名、メールアドレス、所属部署によって、絞り込みが可能
- 10件、20件、50件でのページング

### ユーザ登録
- ユーザ名、メールアドレス、所属部署を登録する
- メールアドレスは一意とし、登録済の場合、エラーとする
- 登録時にメールアドレスと登録した管理ユーザのメールアドレスに初期パスワードを送信する

### ユーザ更新
- ユーザ名、メールアドレス、所属部署、パスワードを更新する
- メールアドレスは一意とし、登録済の場合、エラーとする
- 更新時に、パスワードの変更があった場合、メールアドレスと登録した管理ユーザのメールアドレスにパスワードを送信する

### ユーザ削除 
- 対象のユーザを削除する

## 会議室管理
- 予約対象の会議室を登録/更新/削除/参照できる


### 会議室一覧
- 登録済みの会議室を一覧表示する
- 会議室名、場所を表示する


### 会議室登録
- 会議室名、場所を登録する

### 会議室更新
- 会議室名、場所を更新する

### 会議室削除
- 大正の会議室を削除する


## 予約管理
- 会議室に対する予約を登録/更新/削除/参照できる


### 予約一覧
- 予約を参照する
- 会議室名、日時、人数、メモを表示する
- 会議室名、日時での絞り込みが可能
- 10件、20件、50件でのページング

### 予約登録
- 会議室の予約を登録する
- 会議室名、日時、人数、メモの登録が可能
- 同じ会議室、時間帯が重複すると、登録ができない
- 時間帯は5分単位で選択する

### 予約更新
- 会議室の予約を更新する
- 会議室名、日時、人数、メモの更新が可能
- 同じ会議室、時間帯が重複すると、更新ができない
- 時間帯は5分単位で選択する

### 予約削除
- 指定の予約を削除する

## 会議室稼働率
- 対象期間の稼働率を表示する。

### 会議室稼働率一覧
- 対象期間は開始日付を指定する
- 1日、1週間、1か月間の稼働率を集計する
- 対象の会議室を指定する


## 管理者ユーザ管理
- 管理画面にログインするユーザの管理
- 部署に紐づくユーザの範囲で、管理画面にログインできるユーザの登録/更新/削除を行う


## 管理者ユーザ登録
- ログインユーザの所属する部署配下のユーザを新規作成する
- メールアドレス、ユーザ名、所属部署を登録する
- メールアドレスは一意とし、登録済の場合、エラーとする
- 登録時にメールアドレスに初期パスワードを送信する

## 管理者ユーザ一覧
- ログイン時のユーザの部署配下のユーザの一覧表示を行う

## 管理者ユーザ更新
- ログインユーザの所属する部署配下のユーザを新規作成する
- メールアドレス、ユーザ名、所属部署、パスワードを更新する
- メールアドレスは一意とし、登録済の場合、エラーとする
- 更新時にメールアドレスにパスワードを送信する

## 管理者ユーザ削除
- 管理者ユーザを削除する


## フロントユーザ機能
## ログイン

### メールアドレス、パスワードでのログイン
- メールアドレス、パスワードを入力してログインする
- メールアドレスでSELECTして、0件or パスワードが一致しない場合、「メールアドレス、パスワードが一致しません。入力した値を確認してください。」のエラーメッセージを表示
- パスワードが一致しないエラーが5回発生した場合、ログインロックを10分間行う。
- ログインに成功時、ログインエラー回数のリセットを行う

## TOP画面（予約状況一覧）
- 当日の各会議室の予約が表示される

### 予約登録
- 会議室の予約を登録する
- 会議室名、日時、人数、メモの登録が可能
- 同じ会議室、時間帯が重複すると、登録ができない
- 時間帯は5分単位で選択する

### 予約変更
- 会議室の予約を更新する
- 会議室名、日時、人数、メモの更新が可能
- 同じ会議室、時間帯が重複すると、更新ができない
- 時間帯は5分単位で選択する

### 予約削除
- 予約者、もしくはログインユーザが所属している部署のユーザが登録している場合、予約を削除できる。


## バッチ
## 初期管理者情報作成バッチ
- 初回の管理者ユーザのデータを作成する。 
- 実行時に管理者ユーザの作成、root部署の作成を行う。
- 部署：root、ユーザ名:admin、パスワード:半角大小英数の8文字のランダム文字列




